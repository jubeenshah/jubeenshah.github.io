<!DOCTYPE html>
<!--  Project Odyssey By Jubeen Shah  -->
<!--  Last Published: Wed Jun 10 2020 14:16:35 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5ecd106c3b6aba2e45368f32" data-wf-site="5ebb15d7d3e3c0f73dbdc91c" lang="en">
<head>
  <meta charset="utf-8">
  <title>Milestone 3 - Deployment</title>
  <meta content="An overview on Deployment tasks in the project, with a video summary and learnings from the milestone." name="description">
  <meta content="Milestone 3 - Deployment" property="og:title">
  <meta content="An overview on Deployment tasks in the project, with a video summary and learnings from the milestone." property="og:description">
  <meta content="Milestone 3 - Deployment" property="twitter:title">
  <meta content="An overview on Deployment tasks in the project, with a video summary and learnings from the milestone." property="twitter:description">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../../../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../../../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../../../css/project-odyssey-b2aedc.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://use.typekit.net/fxz6uvb.js" type="text/javascript"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="https://project-odyssey.s3.us-east-2.amazonaws.com/914719ebf2dd787ecceb7cd70964218d.jpg" rel="shortcut icon" type="image/x-icon">
  <link href="https://project-odyssey.s3.us-east-2.amazonaws.com/876fab8172f70d0be2a82c006e856b53.jpg" rel="apple-touch-icon">
  <!--  Global site tag (gtag.js) - Google Analytics  -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-167957177-1"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-167957177-1');
</script>
  <link href="../../../custom-js/odyssey.css" rel="stylesheet" type="text/css">
</head>
<body class="general-page disable-select">
  <div data-collapse="medium" data-animation="default" data-duration="400" role="banner" class="navbar navbar-2 w-nav">
    <div class="container-3 w-container"><a href="../../../index.html" class="w-nav-brand"><img src="https://project-odyssey.s3.us-east-2.amazonaws.com/d130db536435d20d7579fafb511ca245.svg" width="40" alt="banner icon for Jubeen Shah" class="banner"></a>
      <nav role="navigation" class="nav-menu w-nav-menu"><a href="../../../index.html" class="nav-link w-nav-link">Home</a>
        <div data-hover="1" data-delay="0" class="w-dropdown">
          <div class="nav-link w-dropdown-toggle">
            <div class="w-icon-dropdown-toggle"></div>
            <div>Projects</div>
          </div>
          <nav class="nav-list-dropdown w-dropdown-list"><a href="../../../projects/security.html" class="nav-list-dropdown-item w-dropdown-link">Security</a><a href="../../../projects/devops.html" class="nav-list-dropdown-item w-dropdown-link">DevOps</a><a href="../../../projects/iot.html" class="nav-list-dropdown-item bottom-item w-dropdown-link">Internet of Things</a></nav>
        </div><a href="mailto:jnshah2@ncsu.edu" class="nav-link w-nav-link">Contact</a><a href="../../../privacy.html" class="nav-link w-nav-link">Privacy</a></nav>
      <div class="menu-button w-nav-button">
        <div class="w-icon-nav-menu"></div>
      </div>
    </div>
  </div>
  <div class="generic-page-section">
    <div class="generic-bread-crumb"><a href="../../../index.html" class="breadcrumb-link left">Home</a>
      <h5 class="breadcrumb-seperator">/</h5><a href="../../../projects.html" class="breadcrumb-link other">Projects</a>
      <h5 class="breadcrumb-seperator">/</h5><a href="../../../projects/devops.html" class="breadcrumb-link other">Devops</a>
      <h5 class="breadcrumb-seperator">/</h5><a href="../../../projects/devops/poseidon.html" class="breadcrumb-link other">Poseidon</a>
      <h5 class="breadcrumb-seperator">/</h5><a href="../../../projects/devops/poseidon/milestone-3.html" aria-current="page" class="breadcrumb-link other w--current">Deployment</a></div>
    <div class="flex-box-general-100vh generic-project-page devops">
      <div class="generic-content-div-block left-content-div-block">
        <div class="projects-generic-header-div">
          <h2 class="projects-generic-side-header">Content</h2>
        </div>
        <div class="table-of-contents-div"><a href="#deployment" class="generic-project-sidebar-list-item-all-items">Deployment</a><a href="#video-summary" class="generic-project-sidebar-list-item-all-items">Video Summary</a><a href="#report" class="generic-project-sidebar-list-item-all-items">Report</a></div>
      </div>
      <div class="generic-project-content-div">
        <div class="generic-project-flex-box devops">
          <div class="generic-project-header-div">
            <h1 class="generic-project-heading-one devops">Milestone 3</h1>
          </div>
          <div class="generic-project-heading-two-div-block">
            <h2 id="deployment" class="generic-project-heading-two devops">Deployment</h2>
            <p class="generic-project-paragraph-element project-content">In this milestone, the focus was on deployment, and monitoring analysis using Ansible on AWS servers. The following tasks were performed:</p>
            <div class="generic-project-paragraph-div">
              <ul role="list" class="generic-project-list">
                <li class="generic-project-list-items">Deploying the applications (checkbox.io and iTrust) on AWS using git trigger hooks</li>
                <li class="generic-project-list-items">Configurin a redis client to turn off some features using feature flags</li>
                <li class="generic-project-list-items">Extracted a microservice and deployed sereral instances using Kubernetes</li>
                <li class="generic-project-list-items">Implementing the monitoring analysis of the project as a special componenet using Prometheus and Grafana</li>
              </ul>
            </div>
          </div>
          <div class="generic-project-heading-two-div-block">
            <h2 id="video-summary" class="generic-project-heading-two devops">Video Summary</h2>
            <div class="generic-project-paragraph-div">
              <div style="padding-top:56.17021276595745%" id="w-node-e261c4ad145b-45368f32" class="w-embed-youtubevideo"><iframe src="https://www.youtube-nocookie.com/embed/78HHSHWss1I?rel=0&amp;controls=1&amp;autoplay=0&amp;mute=0&amp;start=0" frameborder="0" style="position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:auto" allow="autoplay; encrypted-media" allowfullscreen=""></iframe></div>
            </div>
          </div>
          <div class="generic-project-heading-two-div-block">
            <h2 id="report" class="generic-project-heading-two devops">Report</h2>
            <div class="generic-project-paragraph-div">
              <p class="generic-project-paragraph-element project-content">This was a particular interesting milestone in terms of what we learnt. There were a lot of challenges while we were doing the project, probably only a subset of which were really very easy to solve. We would walk through some of the challenges faced below.</p>
            </div>
            <ul role="list" class="generic-project-list">
              <li class="generic-project-list-items main-bullet">Deployment Challenges</li>
              <li class="generic-project-list-items sub-item">While spawning AWS instances initially we used to hard code the security group. For testing the project, when we ran code on a different AWS account, we faced the problem that it could not find the hard-coded Security Group. That was a problem that we overlooked, but quickly resolved by making the script we wrote, also create an security group that the spawned instance would use.</li>
              <li class="generic-project-list-items sub-item">We also had to make the inventory file using the script, we wrote so that it can be used with the subsequent playbook.</li>
              <li class="generic-project-list-items sub-item">With the Jenkins service running on the AWS, we faced issues with the permissions for executing a build job for the jenkins user. Initially we couldn&#x27;t figure out the problem, because on manually running the ansible playbooks, there was no problem, but with jenkins it was. The resolution was just to assign necessary privileges for the Jenkins user to allow for normal execution.</li>
              <li class="generic-project-list-items sub-item">Also, initally when deploying the iTrust service, we used to download the repository on the production server which at first did not seem incorrect. Halfway through the milestone we realized that we had deploy the .warfile which seemed the logical thing to do in the first place. We had to re-write the deployment strategy for iTrust service.</li>
              <li class="generic-project-list-items sub-item">With the new deployment strategy, we took some time before realizing how to migrate a MySQL database from the build server to the deployment server.</li>
              <li class="generic-project-list-items main-bullet">Infrastructure Challenges</li>
              <li class="generic-project-list-items sub-item">Initially we didn&#x27;t seperate the checkbox.io render service as a micro-service. And were still able to make the checkbox.io service to node failures. When, we figured that was not the approach we had to take, we had to re-write the docker containers, and push the changes.<br></li>
              <li class="generic-project-list-items sub-item">Once the containers were ready, and running independent of Kubernetes, on deployment to AWS, the same containers wouldn&#x27;t run. Turns out it was a security group issue, when necessary ports were not allowed inbound access. Also with kubernetes we had to expose the services themselves.<br></li>
              <li class="generic-project-list-items main-bullet">Monitroing Analysis Challenges</li>
              <li class="generic-project-list-items sub-item">First we wrote nodejs scripts that we presumed could run on the nodes and give us the information. Little did we know before the infrastructure upgrade part of the milestone, that for us to deploy nodejs scripts that we wrote it either had to be a part of the docker container we already deployed, or create new configuration files for kubernetes.<br></li>
              <li class="generic-project-list-items sub-item">Slowly we realized that we also had to have a database ready if we wish to have a visualization for the metric we collected. One of the team members had experience with and grafana. Not, looking at whether kubernetes has support for InfluxDB we started modifying the scripts to allow for the integration.<br></li>
              <li class="generic-project-list-items sub-item">Once ready with the new scripts with support for InfluxDB and Grafana we quickly realized that Kubernetes works best with Prometheus, since we faced problems collecting metrics from the Kubernetes cluster.<br></li>
              <li class="generic-project-list-items sub-item">Finally, we settled with Prometheus and Grafana, collected the necessary configuration files and deployed it Kubernetes. Which worked like a charm.<br></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="generic-content-div-block right-content-div-block-indv-proj">
        <div class="projects-generic-header-div">
          <h2 class="projects-generic-side-header right-end-project-individual">Related Pages</h2>
        </div>
        <div class="table-of-contents-div"><a href="../../../projects/devops/poseidon.html" class="generic-project-sidebar-list-item-all-items right-end">Summary</a><a href="../../../projects/devops/poseidon/milestone-1.html" class="generic-project-sidebar-list-item-all-items right-end">Milestone 1</a><a href="../../../projects/devops/poseidon/milestone-2.html" class="generic-project-sidebar-list-item-all-items right-end">Milestone 2</a><a href="../../../projects/devops/poseidon/milestone-3.html" aria-current="page" class="generic-project-sidebar-list-item-all-items right-end w--current">Milestone 3</a></div>
      </div>
    </div>
  </div>
  <div class="navigation-pane">
    <div class="navigation-butttons-div-block">
      <div data-w-id="c86c6aed-14b5-46e5-5a32-692e8052c911" class="previous-animation-lottie">
        <div data-w-id="c86c6aed-14b5-46e5-5a32-692e8052c912" data-animation-type="lottie" data-src="https://uploads-ssl.webflow.com/5ebb15d7d3e3c0f73dbdc91c/5ec9b0d123eec5baa7194c66_previous.json" data-loop="0" data-direction="1" data-autoplay="0" data-is-ix2-target="1" data-renderer="svg" data-default-duration="2.2" data-duration="0" data-ix2-initial-state="30" class="previous-animation"></div><a href="../../../projects/devops/poseidon/milestone-2.html" class="project-buttons">Milestone 2</a></div>
      <div data-w-id="c86c6aed-14b5-46e5-5a32-692e8052c915" class="next-animation-lottie"><a href="../../../projects.html" class="project-buttons">projects</a>
        <div data-w-id="c86c6aed-14b5-46e5-5a32-692e8052c918" data-animation-type="lottie" data-src="https://uploads-ssl.webflow.com/5ebb15d7d3e3c0f73dbdc91c/5ec9b318518a6eb2eed68cef_next-button.json" data-loop="1" data-direction="1" data-autoplay="0" data-is-ix2-target="1" data-renderer="svg" data-default-duration="2" data-duration="0" data-ix2-initial-state="30" class="next-animation"></div>
      </div>
    </div>
  </div>
  <div class="footer-section">
    <div class="footer div-block-24">
      <div class="section-2 section--footer">
        <div class="footer__inner-container">
          <div class="footer__title">Home</div><a href="../../../index.html" class="footer__links">About</a><a href="mailto:jnshah2@ncsu.edu" class="footer__links">Contact</a><a href="../../../privacy.html" class="footer__links">Privacy</a></div>
        <div class="footer__inner-container">
          <div class="footer__title">Education</div><a href="../../../education/formal.html" class="footer__links">Formal</a><a href="../../../education/certifications.html" class="footer__links">Certification</a><a href="../../../education/pursuing.html" class="footer__links">Pursuing</a></div>
        <div class="footer__inner-container">
          <div class="footer__title">Projects</div><a href="../../../projects/security.html" class="footer__links">Security</a><a href="../../../projects/devops.html" class="footer__links">DevOps</a><a href="../../../projects/iot.html" class="footer__links">Internet of Things</a></div>
        <div class="footer__inner-container">
          <div class="footer__title">Resources</div><a href="https://project-odyssey.s3.us-east-2.amazonaws.com/Odyssey-Resources/Resume/JubeenShah-Resume.pdf" target="_blank" class="footer__links">Resumé</a></div>
        <div id="w-node-bcd1e5970ea1-e5970e8a" class="footer__inner-container footer__inner-container--cmf"><a href="../../../index.html" target="_blank" class="js-banner-link w-inline-block"><img src="https://project-odyssey.s3.us-east-2.amazonaws.com/d130db536435d20d7579fafb511ca245.svg" alt="banner icon for Jubeen Shah" class="footer__image lazyload"></a>
          <div class="footer__links non-link">Passionately curious about technology</div>
        </div>
      </div>
      <div class="footer__bottom">
        <div class="footer__bottom-text">Project Odyssey - © All rights reserved. 2020 Jubeen Shah</div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js?site=5ebb15d7d3e3c0f73dbdc91c" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="../../../js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>